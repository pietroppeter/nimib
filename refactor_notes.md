minimal stuff needed to merge:

- [x] be able to run nim r docs/hello (also with nimibPreviewCodeAsInSource)
  - [x] newNbNewBlock
  - [x] context field for NbBlock (populated during newNbBlock)
  - [x] new nbText and nbCode
  - [x] default html backend for nbText and nbCode: useHtmlBackend, highlightCode, highlightCode
  - [x] renderPlan(s) and renderProc(s) for NbDoc
  - [x] ~optional renderPlan and partial for NbBlock?~ no need. Change command name and add specific partial and renderPlan in doc.
  - [x] render (block) backend independent proc
  - [x] render (doc) backend independent proc
  - [x] fix rendering upstream of renderBlock (in write)
  - [x] run nim r hello successfully
- [ ] be able to run the rest of documentation
  - [x] mostaccio
  - [x] numerical
  - [x] nolan
  - [x] pythno (change: `nb.blk.output` -> `nb.blk.context["output"]`)
  - [x] cheatsheet (needs fixing)
    - [x] fix issue #52: `<http://www.example.com>` not rendered because not escaped
  - [ ] index
  - [x] far/from/home (might be broken beacuse of encoding of files on mac?)
  - [x] remove ptest (also from index)
  - [ ] markdown backend
  - [x] nbImage
  - [x] nbFile
- [x] tests
  - [x] tblocks.newNbBlock
  - [x] tnimib.nbText
  - [x] tnimib.nbCode
  - [x] trenders.renderBlock
- [ ] addons
  - [x] new logging
  - [x] nbNormalize (taken from tsources)
  - [x] main partial in document can be overriden
- [ ] accidental changes
  - [x] exporting sugar - am I sure about this?
  - [x] mutated doc when rendering - I do not like it but not sure how to avoid it
- [ ] cleanup
  - [x] remove old newBlock / cleanup blocks.nim
  - [x] remove manageErrors (never used)
  - [ ] remove NbKind (when new nbImage is ready)
  - [ ] remove all unused stuff in renders
    - [x] cleanup html render stuff
    - [ ] cleanup markdown render stuff

to be done after merging in devel:

- [ ] leftover fixes/improvements and cleanup
  - [ ] add task nimble docs to build docs
  - [ ] check far/from/home is not broken
  - [ ] test penguins
  - [ ] nbCodeInBlock: use somewhere / test
  - [ ] add example for nbFile
  - [ ] add also nbAudio, nbVideo? (with new doc examples)
  - [ ] make "Writing File" in nbFile an optional customization
  - [ ] add a nbShell? see #34
  - [ ] rename nbNormalize? (too vague)
  - [ ] frontmatter for markdown backend?
- [ ] check that projects that depend on nimib are not broken
  - [ ] check on windows and linux
  - [ ] nimibook
  - [ ] scinim/getting-started
  - [ ] nimislides
  - [ ] nblog
  - [ ] adventofnim
- [ ] release
  - [x] add nimble docs to CI
  - [ ] bump to 0.3
  - [ ] prepare release notes
  - [ ] release
- [ ] follow ups
  - [ ] nim-mustache
    - [ ] access to values
    - [ ] print context

notes:

- testing will also be improved (did not notice that ptest is turned off)
- (I could also almost pass to an improved doc generation workflow... - problem with README though...)
- [breaking change] code will be stripped by default (as a sort of normalization)
  - with this change I might able to simplify also tests in tsources? should I normalize in the same way?
- all templates have been moved outside of nbInit (no more unused warning!)
- log will move in newBlock? will it be newBlock(cmd: string, body, blockImpl: untyped) so that I can call a log at the end?
- added render backend as customizable in nbInit
- added a context field to NbBlock (inherits partials from nb object)
- I cannot have the context to inherit also values from nb object (values not exported and there is no derive in nim-mustache for context, I might want to do a PR)
- no need to have a partial field in NbBlock. will render using "{{> " & blk.cmd & "}}" (e.g. {{> nbText}})
- actually a partial field is needed if I want to customize (it could be optional). same for a renderPlan for the block
- but as first iteration (internal to this PR) I could just use the partials and renderPlans in the doc
- later I need to decide if I want them to be Option object (they should be but I never used much that API and not sure if it is worth it) or not
- refactored newBlock to contain blockImpl and other identifiers (nbBlock, nbDoc - will this names clash with aliases?)
  - also renamed to newNbBlock
  - also added simple logging (should I have a whale emoji everywhere instead of \[nimib\]? yeah probably! but maybe I leave it for another PR...)
- not sure whether to use renderPlans or renderPlan for NbDoc (and renderProcs or renderProc?)
- code is now normalized (including newlines)
- minimal testing for nbText and nbCode added (could be improved later)
- note that output currently not stripped and by default it has a newLine at end. should I remove the newline at the end? (we will in rendering...)
- not having mdCfg as global object in renders (I would like to have it as const but did not work back then, should check if it works now)
- can I remove NbDoc.render field? probably yes
- there is no way to print a Context -> follow up PR to nim-mustache
- using develop version of nim-mustache with public values
- these two do not seem very good ideas, but I do want output without newlines at the end:
  - output in context has removeSuffix (with dup)
  - exporting sugar now
  - especially a bad idea to have blk.output and blk.context["output"] different
  - I really should think of an alternative...
- something I do not like is that rendering changes state of doc and blocks. it should not (it could affect a second pass with another backend)
- in fact now write wants a mutable doc
- the moment I have the json backend I might be able to have a non mutable doc (but might not be worth it)
- far from home has likely being broken for a while (replacing partial document is wrong given current defaults)